# QRkot_spreadseets
## приложение для Благотворительного фонда поддержки котиков QRKot. 
#### Фонд собирает пожертвования на различные целевые проекты: 
##### - на медицинское обслуживание нуждающихся хвостатых
##### - на обустройство кошачьей колонии в подвале
##### - на корм оставшимся без попечения кошкам
##### - на любые цели, связанные с поддержкой кошачьей популяции.

#### Проекты
> В Фонде QRKot может быть открыто несколько целевых проектов. У каждого проекта есть название, описание и сумма, которую планируется собрать. После того, как нужная сумма собрана — проект закрывается.

#### Пожертвования
> Каждый пользователь может сделать пожертвование и сопроводить его комментарием. Пожертвования не целевые: они вносятся в фонд, а не в конкретный проект. Каждое полученное пожертвование автоматически добавляется в первый открытый проект, который ещё не набрал нужную сумму. 

#### Пользователи
> Целевые проекты создаются администраторами сайта. 

> Любой пользователь может видеть список всех проектов, включая требуемые и уже внесенные суммы. Это касается всех проектов — и открытых, и закрытых.

> Зарегистрированные пользователи могут отправлять пожертвования и просматривать список своих пожертвований.

## Зарегистрированному пользователю с помощью проекта можно:
- Работать с api по адресу http://127.0.0.1:8000/docs
- Посмотреть список всех проектов
- Сделать пожертвование
- Посмотреть свои пожертвования

### Используемые технологии
- Python 3.9
- FastAPI
- SQLite
- Alembic
- Aiogoogle

## Как запустить проект

Клонировать репозиторий:
```
git clone git@github.com:NASTY-SMIT/QRkot_spreadsheets.git
```

Cоздать и активировать виртуальное окружение:

```
python3 -m venv venv
```

* Если у вас Linux/macOS

    ```
    source venv/bin/activate
    ```

* Если у вас windows

    ```
    source venv/scripts/activate
    ```
Установить зависимости
```
pip install -r requirements.txt
```
Создать файл `.env` и заполнить его:
```
    APP_TITLE=Благотворительный фонд поддержки котиков QRKot
    DATABASE_URL=sqlite+aiosqlite:///./fastapi.db
    FIRST_SUPERUSER_EMAIL=ваш логин для суперюзера
    FIRST_SUPERUSER_PASSWORD=ваш пароль от суперюзера
    SECRET=Ваш секретный ключ
    TYPE=Тип сервисного аккаунта
    PROJECT_ID=Айди проекта
    PRIVATE_KEY_ID=Айди приватного ключа
    PRIVATE_KEY=Приватный ключ
    CLIENT_EMAIL=Почта сервисного аккаунта
    CLIENT_ID=Айди сервисного аккаунта
    AUTH_URI="https://accounts.google.com/o/oauth2/auth"
    TOKEN_URI="https://oauth2.googleapis.com/token"
    AUTH_PROVIDER_X509_CERT_URL="https://www.googleapis.com/oauth2/v1/certs"
    CLIENT_X509_CERT_URL=Кэш пароля
    EMAIL=Ваша настоящая почта
```
Инициализировать Alembic
```
alembic init --template async alembic
```
Создать файл миграции 
```
alembic revision --autogenerate -m "My migration"
```
Применить миграции
```
alembic upgrade head
```
Запустить проект локально:
```
    uvicorn app.main:app --reload
```
## Примеры запросов к API

##### Спецификация проекта доступна в файле `openapi.json` в корневой директории проекта.
Для просмотра документации загрузите файл на [сайт](https://redocly.github.io/redoc/). Вверху страницы есть кнопка Upload a file, нажмите её и загрузите скачанный файл. Спецификация проекта 
отобразится в формате ReDoc.

❤️Автор [Nasty Shmidt](https://github.com/NASTY-SMIT)❤️
[Обратная связь](https://t.me/nastyShmidt)
